{% extends 'base.html' %}
{% block content %}
<main class="max-w-6xl mx-auto px-6 py-10">

    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <h1 class="text-3xl font-bold mb-8 text-gray-800 border-b pb-3">
        ğŸ“š Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø¯ÙˆØ±Ø©:
        <span class="text-green-700">{{ course.title_ar or course.title_en }}</span>
    </h1>

    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
    <div class="flex flex-wrap items-center gap-3 mb-8">
        <a href="{{ url_for('admin_lesson_new', course_id=course.id) }}" 
           class="bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded-lg shadow-md transition">
           â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯
        </a>
        <a href="{{ url_for('admin_index') }}" 
           class="bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded-lg shadow-md transition">
           â† Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¯ÙˆØ±Ø§Øª
        </a>
    </div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ -->
    {% if lessons %}
    <div class="overflow-x-auto bg-white rounded-xl shadow-lg border border-gray-200">
        <table class="w-full text-right border-collapse">
            <thead class="bg-gray-100 text-gray-700">
                <tr>
                    <th class="py-3 px-4 border-b">#</th>
                    <th class="py-3 px-4 border-b">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (AR)</th>
                    <th class="py-3 px-4 border-b">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (EN)</th>
                    <th class="py-3 px-4 border-b">Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                    <th class="py-3 px-4 border-b">Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</th>
                    <th class="py-3 px-4 border-b text-center">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
                {% for lesson in lessons %}
                <tr class="hover:bg-gray-50 transition">
                    <td class="py-3 px-4 text-gray-700">{{ loop.index }}</td>
                    <td class="py-3 px-4 font-semibold text-gray-800">{{ lesson.title_ar }}</td>
                    <td class="py-3 px-4 text-gray-600">{{ lesson.title_en }}</td>
                    <td class="py-3 px-4 text-gray-700">{{ lesson.position }}</td>
                    <td class="py-3 px-4">
                        {% if lesson.video %}
                        <a href="{{ url_for('uploaded_file', filename=lesson.video) }}" 
                           target="_blank" 
                           class="text-blue-600 hover:underline hover:text-blue-800">
                           ğŸ¥ Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
                        </a>
                        {% else %}
                        <span class="text-gray-400">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>
                        {% endif %}
                    </td>
                    <td class="py-3 px-4 text-center">
                        <div class="flex justify-center gap-2">
                            <!-- Ø²Ø± ØªØ¹Ø¯ÙŠÙ„ -->
                            <a href="{{ url_for('admin_lesson_edit', course_id=course.id, lesson_id=lesson.id) }}" 
                               class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1.5 rounded-md text-sm shadow transition">
                               âœï¸ ØªØ¹Ø¯ÙŠÙ„
                            </a>

                            <!-- Ø²Ø± Ø­Ø°Ù -->
                        <!-- Ø²Ø± Ø­Ø°Ù -->
<form method="post"
      action="{{ url_for('admin_lesson_delete', course_id=course.id, lesson_id=lesson.id) }}"
      onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ØŸ')">
    <button type="submit"
            class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-md text-sm shadow transition">
        ğŸ—‘ï¸ Ø­Ø°Ù
    </button>
</form>

                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="text-gray-600 text-lg mt-4">Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø¯Ø±ÙˆØ³ Ø¨Ø¹Ø¯.</p>
    {% endif %}

</main>
{% endblock %}
