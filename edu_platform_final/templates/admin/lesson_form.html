{% extends 'base.html' %}
{% block content %}
<main class="max-w-3xl mx-auto px-6 py-10">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">
        {% if lesson %}ุชุนุฏูู ุงูุฏุฑุณ{% else %}ุฅุถุงูุฉ ุฏุฑุณ ุฌุฏูุฏ{% endif %}
    </h1>

    <!-- โ ูููุฐุฌ ุงูุชุนุฏูู ุฃู ุงูุฅุถุงูุฉ -->
    <form method="post" enctype="multipart/form-data"
          action="{% if lesson %}{{ url_for('admin_lesson_edit', course_id=course_id, lesson_id=lesson.id) }}{% else %}{{ url_for('admin_lesson_new', course_id=course_id) }}{% endif %}"
          class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200 space-y-4">

        <div>
            <label class="block text-gray-700 mb-1 font-medium">ุงูุนููุงู ุจุงูุนุฑุจูุฉ</label>
            <input name="title_ar" required
                   value="{{ lesson.title_ar if lesson else '' }}"
                   class="w-full p-2 border rounded-md focus:ring focus:ring-blue-200"/>
        </div>

        <div>
            <label class="block text-gray-700 mb-1 font-medium">ุงูุนููุงู ุจุงูุฅูุฌููุฒูุฉ</label>
            <input name="title_en"
                   value="{{ lesson.title_en if lesson else '' }}"
                   class="w-full p-2 border rounded-md focus:ring focus:ring-blue-200"/>
        </div>

        <div>
            <label class="block text-gray-700 mb-1 font-medium">ุงูุชุฑุชูุจ</label>
            <input type="number" name="position"
                   value="{{ lesson.position if lesson else 0 }}"
                   class="w-full p-2 border rounded-md focus:ring focus:ring-blue-200"/>
        </div>

        <div>
            <label class="block text-gray-700 mb-1 font-medium">ุชุญููู ููุฏูู ุงูุฏุฑุณ</label>
            {% if lesson and lesson.video %}
                <p class="mb-2">
                    ๐ฌ ุงูููุฏูู ุงูุญุงูู:
                    <a href="{{ url_for('uploaded_file', filename=lesson.video) }}" target="_blank" class="text-blue-600 underline">ุนุฑุถ ุงูููุฏูู</a>
                </p>
            {% endif %}
            <input type="file" name="video" class="w-full border p-2 rounded-md"/>
        </div>

        <div>
            <label class="block text-gray-700 mb-1 font-medium">ุงููุญุชูู (ุจุงูุนุฑุจูุฉ)</label>
            <textarea name="content_ar" rows="5"
                      class="w-full p-2 border rounded-md focus:ring focus:ring-blue-200">{{ lesson.content_ar if lesson else '' }}</textarea>
        </div>

        <div>
            <label class="block text-gray-700 mb-1 font-medium">ุงููุญุชูู (ุจุงูุฅูุฌููุฒูุฉ)</label>
            <textarea name="content_en" rows="5"
                      class="w-full p-2 border rounded-md focus:ring focus:ring-blue-200">{{ lesson.content_en if lesson else '' }}</textarea>
        </div>

        <div class="flex justify-between items-center pt-4">
            <button class="px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md transition">
                ๐พ {% if lesson %}ุชุญุฏูุซ ุงูุฏุฑุณ{% else %}ุญูุธ ุงูุฏุฑุณ{% endif %}
            </button>
            <a href="{{ url_for('admin_lessons', course_id=course_id) }}"
               class="text-gray-600 hover:text-gray-800 underline">ุฅูุบุงุก ูุงูุนูุฏุฉ</a>
        </div>
    </form>

    <!-- โ ูููุฐุฌ ุงูุญุฐู ูููุตู ุนู ูููุฐุฌ ุงูุชุนุฏูู -->
    {% if lesson %}
    <form method="post"
          action="{{ url_for('admin_lesson_delete', course_id=course_id, lesson_id=lesson.id) }}"
          onsubmit="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุฏุฑุณุ');"
          class="mt-4">
        <button type="submit"
                class="px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg shadow-md transition">
            ๐๏ธ ุญุฐู ุงูุฏุฑุณ
        </button>
    </form>
    {% endif %}
</main>
{% endblock %}
